## ‚ö™ Ô∏è 2.4 –¢–µ—Å—Ç–∏—Ä—É–π –º–∏–¥–¥–ª–≤–∞—Ä—ã –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω–æ

‚úÖ **–î–µ–ª–∞–µ–º:**

–ú–∏–¥–¥–ª–≤–∞—Ä—ã –Ω–µ —Ç–µ—Å—Ç–∏—Ä—É—é—Ç –ø–æ—Ç–æ–º—É —á—Ç–æ –æ–Ω–∏ —è–≤–ª—è—é—Ç—Å—è –º–∞–ª–æ–π —á–∞—Å—Ç—å—é —Å–∏—Å—Ç–µ–º—ã –∏ —Ç—Ä–µ–±—É—é—Ç —Ä–∞–±–æ—Ç–∞—é—â–µ–≥–æ —ç–∫—Å–ø—Ä–µ—Å—Å-—Å–µ—Ä–≤–µ—Ä–∞. –û–±–µ –ø—Ä–∏—á–∏–Ω—ã –æ—à–∏–±–æ—á–Ω—ã - –º–∏–¥–¥–ª–≤–∞—Ä—ã –≤–ª–∏—è—é—Ç –Ω–∞ –≤—Å–µ –∏–ª–∏ –Ω–∞ –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ –∑–∞–ø—Ä–æ—Å–æ–≤ –∏ –º–æ–≥—É—Ç—å –±—ã—Ç—å –ª–µ–≥–∫–æ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã –∫–∞–∫ —á–∏—Å—Ç—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–ª—É—á–∞—é—Ç –æ–±—ä–µ–∫—Ç—ã {req, res}.

–ß—Ç–æ–±—ã –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é-–º–∏–¥–¥–ª–≤–∞—Ä, –Ω—É–∂–Ω–æ –≤—ã–∑–≤–∞—Ç—å –µ–µ –∏ –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å —á–µ—Ä–µ–∑ —à–ø–∏–æ–Ω—ã ([–∏—Å–ø–æ–ª—å–∑—É—è, –Ω–∞–ø—Ä–∏–º–µ—Ä, Sinon](https://www.npmjs.com/package/sinon)) –µ—ë –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ–π —Å –æ–±—ä–µ–∫—Ç–∞–º–∏ {req, res}, —á—Ç–æ–±—ã —É–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ —Ñ—É–Ω–∫—Ü–∏—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ –æ—Ç—Ä–∞–±–æ—Ç–∞–ª–∞.

–ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ [node-mock-http](https://www.npmjs.com/package/node-mocks-http) –∏–¥—ë—Ç –µ—â—ë –¥–∞–ª—å—à–µ –∏ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä—ã –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –æ–±—ä—è–µ–∫—Ç–æ–≤ {req, res} –∏ —Å–ª–µ–¥–∏—Ç –∑–∞ –∏—Ö –ø–æ–≤–µ–¥–µ–Ω–∏–µ–º.

`node-mock-http` –º–æ–∂–µ—Ç –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –ª–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–π http status –¥–ª—è –æ–±—ä–µ–∫—Ç–∞ res, –æ–∂–∏–¥–∞–Ω–∏—è–º (—Å–º. –ü—Ä–∏–º–µ—Ä –Ω–∏–∂–µ)

<br/>

‚ùå **–ò–Ω–∞—á–µ:** –ë–∞–≥ –≤ Express-–º–∏–¥–¥–ª–≤–∞—Ä–µ === –±–∞–≥ –≤ –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–µ –∑–∞–ø—Ä–æ—Å–æ–≤

<br/>

<details><summary>‚úè <b>–ü—Ä–∏–º–µ—Ä –∫–æ–¥–∞</b></summary>

<br/>

### üëè –ü—Ä–∞–≤–∏–ª—å–Ω–æ: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –º–∏–¥–¥–ª–≤–∞—Ä–∞ –≤ –æ—Ç–¥–µ–ª—å–Ω–æ—Å—Ç–∏ –±–µ–∑ —Å–µ—Ç–µ–≤—ã—Ö –≤—ã–∑–æ–≤–æ–≤ –∏ –ø–æ–¥–Ω—è—Ç–∏—è Express-—Å–µ—Ä–≤–µ—Ä–∞

![](https://img.shields.io/badge/üîß%20Example%20using%20Jest-blue.svg "Examples with Jest")

```javascript
//–º–∏–¥–¥–ª–≤–∞—Ä–∞, –∫–æ—Ç–æ—Ä—É—é —Ö–æ—Ç–∏–º –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å
const unitUnderTest = require("./middleware");
const httpMocks = require("node-mocks-http");
//Jest —Å–∏–Ω—Ç–∞–∫—Å–∏—Å, —ç–∫–≤–∏–≤–∞–ª–µ–Ω—Ç–Ω—ã–π describe() –∏ it() –≤ Mocha
test("–ó–∞–ø—Ä–æ—Å –±–µ–∑ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–æ–Ω–Ω–æ–≥–æ –∑–∞–≥–æ–ª–æ–≤–∫–∞ –¥–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å 403 —Å—Ç–∞—Ç—É—Å", () => {
  const request = httpMocks.createRequest({
    method: "GET",
    url: "/user/42",
    headers: {
      authentication: ""
    }
  });
  const response = httpMocks.createResponse();
  unitUnderTest(request, response);
  expect(response.statusCode).toBe(403);
});
```

</details>

<br/><br/>
