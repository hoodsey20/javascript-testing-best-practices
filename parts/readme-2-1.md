## ⚪ ️2.1 Пополни арсенал тестов: посмотри за пределы привычных юнит-тестов и пирамиды тестирования

✅ **Делаем:** Хотя [пирамиде тестирования](https://martinfowler.com/bliki/TestPyramid.html) > 10 лет, концепция до сих пор актуальна. Эта модель предполагает три вида тестов и влияет на стратегию тестирования большинства разработчиков. Но за это время появились новые методы и подходы, которые остаются в тени пирамиды тестирования.

Учитывая кардинальные изменения последних 10 лет (микросервисы, облачные технологии, серверлесс), возможно ли, что модель 10-летней давности подойдет для всех типов приложений? разве мир тестирования не должен приветствовать появление новых методы?

Не поймите неправильно, в 2019 году пирамида тестирования TDD и юнит-тесты попрежнему остаются мощной техникой и, вероятно подходят для большинства приложений. Только как любая другая, несмотря на полезность, [модель иногда ошибается](https://en.wikipedia.org/wiki/All_models_are_wrong).

Например, рассмотрим IOT-приложение (интернет вещей), которое принимает много данных в шину сообщений, такую как Kafka или RabbitMQ, которые затем отправляются в некое хранилище и в конечном итоге запрашиваются некоторым аналитическим пользовательским интерфейсом.

Нужно ли тратить 50% нашего бюджета тестирование на написание юнит тестов для приложения, которое ориентировано на интеграцию и содержит мало бизнес-логики?

По мере увеличения разнообразия типов приложений (боты, крипто, Alexa-skills (написание сценариев для виртуального ассистента Amazon Alexa)) возрастают шансы найти сценарии, в которых пирамида тестирования не самый оптимальный вариант.

Пришло время разнообразить арсенал тестов и познакомиться с бОльшим количеством типов тестирования и концепций похожих на пирамиду тестирования, но предлагающих гибкий выбор инструментов тестирования в зависимости от проблем, с которыми пришлось столкнуться («Эй, наш API не работает, давайте напишем контрактное тестирование, ориентированное на потребителя!'). Диверсифицируй тесты как инвестор, который строит портфель на основе анализа рисков - оцени, где могут возникнуть проблемы, и подбери профилактические меры для смягчения потенциальных рисков.

Предостережение: спор о TDD в мире ПО являет собой типичный пример ложной дихотомии, некоторые проповедуют его повсеместное использование, другие считают, что это зло. Каждый, кто мыслит абсолютными категориями неправ :]

<br/>

❌ **Иначе:** Ты упускаешь инструменты с потрясающей рентабельностью инвестиций, некоторые, такие как Fuzz, lint и mutation, могут дать за 10 минут реальную пользу.

<br/>

<details><summary>✏ <b>Пример кода</b></summary>

<br/>

✅ **Делаем:** Пример правильного использования: Синди Шридхарен предлагает богатый портфель тестов в своей удивительной публикации «Тестирование микросервисов - разумный путь»
![alt text](assets/bp-12-rich-testing.jpeg "Cindy Sridharan suggests a rich testing portfolio in her amazing post ‘Testing Microservices — the sane way’")

<strong class="markup--strong markup--p-strong">☺️Пример: </strong><a href="https://www.youtube.com/watch?v=-2zP494wdUY&amp;feature=youtube" data-href="https://www.youtube.com/watch?v=-2zP494wdUY&amp;feature=youtu.be" class="markup--anchor markup--p-anchor" rel="nofollow noopener" target="_blank">[YouTube: “Beyond Unit Tests: 5 Shiny Node.JS Test Types (2018)” (Yoni Goldberg)](https://www.youtube.com/watch?v=-2zP494wdUY&feature=youtu.be)</a>

<br/>

![alt text](assets/bp-12-Yoni-Goldberg-Testing.jpeg "A test name that constitutes 3 parts")

</details>

<br/><br/>
